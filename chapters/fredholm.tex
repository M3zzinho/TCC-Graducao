\chapter{Fredholm Operators}
\label{ch:fredholm operators}
%\section{Definitions and comparisons}
- comments about how the proof of ?? induces a Fredholm operator theory idea
- talk about a trivialization of atikinson theorem
- continuous family of classical fredholm operators 
- no topological clousure of the image
- comment about moore-penrose idea

%\section{Regular Fredholm Operators and their indexes}
- moore penrose idea
- definition
- kernel is finite rank module 
- index definition
- ind(T) in K0(A) 
- index properties
- (I-T) compact implies ind(T) = 0
- T1-T2 compact implies ind(T1)=ind(T2)
- families index

%\section{Regularization of General Fredholm Operators}
- construction of regular
- ind(T) in K0(A)

%\section{Toolkit of theorems}
- index properties
- index locally constant
- ind(T2T1) = ind(T1)+ind(T2)

%\section[The Fredholm Picture of \texorpdfstring{\ensuremath{K_0}}{K0}]{The Fredholm Picture of \texorpdfstring{\mathbf{K_0}}{K0}}
- surjectivity of the index
- classification of ind(T)=0
- equivalence relation
- Atiyah-Janich theorem


%\section{Fredholm operators}
In regular Fredholm theory, one would define Fredholm operators as those with both kernel and cokernel were finite dimensional. Here, our concepts involving ``finiteness'' depends on a fixed $C^*$-algebra $A$, so, talking about dimension is kinda tricky. But classical Atikinson's theorem characterizes Fredholm operators in terms only of compactness, which we fully characterize in the previous proposition. That points towards a generalization. 

\begin{definicao}[$A$-Fredholm]
\label{def:Fredholm operators}
A given $T\in \adj(E,F)$ is said to be $A$-Fredholm if it is invertible modulo $\operatorname{FR}(E,F)$, i.e., exists $S \in \adj(F,E)$ such that both $\sub\Id E - ST$ and $\sub\Id F - TS$ are $A$-finite rank operators.
\end{definicao}

If adjointable operators $S$, $S'$ and $T$ are such that both $TS$ and $S'T$ are Fredholm, one can obtain operators $R$ and $R'$ such that $\Id - T(SR)$ and $\Id - (R'S')T$ are finite-rank ones. Hence $T$ is Fredholm. 

\begin{proposicao}
\label{prop: I-ST compacto ===>  T fredholm}
If $T$ is invertible modulo $\mathscr K(E,F)$, then it is $A$-Fredholm. Hence, definition \ref{def:Fredholm operators} really fits the sentence ``Atikinson's theorem trivialization''.

\begin{proof}
Let us digress a little bit:
\vspace{-0.7cm}
\begin{quote}
    \begin{observacao}
    Let $J \triangleleft A$ be a non-closed ideal of a unital $C^*$-algebra, and suppose that $a\in A$ is invertible modulo $\con J$ (the topological closure), i.e., there exists $b \in A$ such that $(1-ab)\in \con J$. Therefore, there exists a sequence $(j_n)_n \subset J$ such that $j_n \to (1-ab)$, which means that at least one of then, say $j$, obeys $\|1-ab - j\| < 1$. Since $ab+j = 1 - (1-ab-j)$, $ab+j$ is invertible by \ref{lema:lambda1-a invertivel para ||a||<lambda}. Therefore, some algebraic manipulation shows that
    \begin{equation*}
        a\underbrace{b(ab+j)^{-1}}_{\sub x1}- 1 = -j(ab+j)^{-1} \in J
    \end{equation*}
    i.e., $a$ is right invertible modulo $J$. But since $b$ also ensure that $(1-ba) \in \con J$, hence it exist $\sub x2$ such that $(\sub x2a-1) \in J$. Notice that
    \begin{equation*}
        \sub x2(a\sub x1 - 1) = \big((\sub x2a)\sub x1 - \sub x2\big) = (\sub x1 - \sub x2) \in J,
    \end{equation*}
    i.e., $[\sub x1] = [\sub x2]$ in the quotient algebra $A/J$. Therefore, there is a representative of the class of $\sub x1$ and $\sub x2$, say $x$, such that both $ax-1$ and $xa-1$ belong to $J$, i.e., $a$ is invertible modulo $J$.
    \end{observacao}
\end{quote}
With this digression in mind, notice that if $(\sub\Id E - TS) \in \mathscr K(E,F)$, there exist a element $ S$ such that both $\sub\Id E - TS$ and $\sub\Id F-ST$ are finite-rank operators, i.e., $T$ is Fredholm.
\end{proof}
\end{proposicao}


\begin{observacao}
Let $H$ an $W$ be complex Hilbert spaces. The set of classical Fredholm operators coincide with the $\C$-Fredholm ones. 
\end{observacao}

\begin{exemplo}[\cite{239982}]
\label{exemplo: familia continua de operadores}
Let $X \in \CHaus$ and $\mathscr F(\ell^2(\N))$ the set of $\C$-Fredholm classical operators over the separable Hilbert space $\ell^2(\N)$. We avoid writing $\ell^2(\mathbb N)$ everywhere, so $\mathscr B$, $\mathscr K$ and $\mathscr F$ will respectively denote the bounded, compact and Fredholm operators over $\ell^2(\N)$.

For any continuous family of operators\footnote{For example, $T: [0,1] \longto \mathscr F$, $T_x(\xi) \coloneqq (x\xi_n)_n$.} $T: X \longto \mathscr B$, is possible to see $T$ as a $C(X)$-endomorphism over the standard Hilbert $C(X)$-module $\mathscr H_{C(X)}$:
\begin{equation*}
    \function{{\widehat T}{\mathscr H_{C(X)}}{\mathscr H_{C(X)}}{\xi}{(x\mapsto T_x\xi(x))}}
\end{equation*}
Each $T_x\coloneqq T(x)$ is a classical operator in a Hilbert space, so $T^* \in C(X,\mathscr B)$. Hence $\widehat T$ is adjointable. In order to show that continuous families of Fredholm operators extent to $C(X)$-Fredholm ones, we need the following claim:
\begin{itroman}
    \item \label{claim: hat T is C(X)-compact for T in C(X,K)} \textbf{\mathbf{\widehat T} is \mathbf{C(X)}-compact whenever \mathbf T is continuous family of compact operators}:
    Let $\ep>0$ and $T \in C(X, \mathscr K)$. For each $x \in X$, pick a finite rank operator $R_x$ so that $\| R_x-T_x\| \leq \ep /3$, and pick a neighborhood $U_x$ such that $\| T_x-T_y\| \leq \ep/3$ for $y \in U_x$. Since $X$ is compact, extract a finite subcover $\sub U1 , \ldots, U_n$ of $(U_x)_{x \in X}$, and a partition of unity $\sub\lambda1, \ldots, \lambda_n$. Then 
$$\| T_x- \sum_{i=1}^n \lambda_j (x) R_{x_j} \|  \leq \ep.$$
Therefore, is a finite rank the operator $\sum_{i} \lambda_i (\come) R_{x_i}$ and, $\widehat T$ is compact.
\end{itroman}


Suppose that the range of $T$ is constituted only by Fredholm operators, i.e., $\mathscr F$. In order to see the extension of $T$ to the standard Hilbert $C(X)$-module, $\widehat T \in \sub{\adj}{C(X)}(\mathscr H_{C(X)})$ is a $C(X)$-Fredholm operator, we must conjure the following:
\begin{quote}
    \begin{invocacao}[Classical Bartle-Graves theorem - Corollary 17.67 \cite{aliprantisinfinite}]
    \label{teo: bartle graves}
    Every surjective continuous linear operator between Banach spaces\footnote{More generally, completely metrizable locally convex spaces, i.e., Fr√©chet spaces.} admits continuous right inverse, but not necessarily a linear one.
    \end{invocacao}
\end{quote}
Bartle-Graves theorem has significant improvements and different versions (e.g., \cite{dontchev2020bartle}), but for our needs, we are fine with the above. 

Consider the Calkin algebra given by the quotient of compact operators: $\mathscr Q \coloneqq {\mathscr B}/{\mathscr K}$
and $\pi$ be the quotient map. Bartle-Graves theorem offers a continuous section $\sigma : \mathscr Q \longto \mathscr B$ such that $\pi \sigma A = A$. Let $S$ be given by the composition: 
\begin{equation*}
\begin{tikzcd}
X \arrow[d, "T"'] \arrow[rrr, dashed, "S"]      &   &  & \mathscr F \\
\mathscr F \arrow[r, "\pi"', two heads] & \operatorname{GL}\mathscr Q \arrow[rr, "(\come)^{-1}"'] &  & \operatorname{GL}\mathscr Q \arrow[u, "\sigma"']
\end{tikzcd}
\end{equation*}
Since $T_x\in \mathscr F$ if and only if $\pi(T_x)$ is invertible in $\mathscr Q$ (by Atikinson's theorem), $S$ is well defined and continuous (each arrow above is), hence defines $\widehat S : C(X,\ell^2(\N)) \longto C(X,\ell^2(\N))$. We are left to show that both $\Id - \widehat S\widehat T$ and $\Id - \widehat T\widehat S$ are $C(X)$-compact operators in $\mathscr H_{C(X)}$.

Since $\sub1{C(X)} - T\cdot S$ and $\sub1{C(X)}-S\cdot T$ are continuous families with compact range, $\widehat T$ is indeed $C(X)$-Fredholm by \ref{claim: hat T is C(X)-compact for T in C(X,K)}.
\end{exemplo}

In the classical Fredhom theory between Hilbert spaces, one only requires that $\ker T$ and $\coker T$ are finite dimensional. Those assumptions are sufficient to guarantee that every classical Fredholm operator has closed range, hence orthogonal decompositions are abundant in the proofs. Only if we could extend it so naturally, maybe we woudn't be here with a slightly different definition.

\begin{exemplo}[$A$-Fredholm operator whose image isn't topologically closed.]
$C[0,1]$ is a unital $C^*$-algebra, that we shall consider as a Hilbert $C^*$-module. Choose $T$ to be
\begin{equation*}
    \function{T{C[0,1]}{C[0,1]}{f}{(x \mapsto xf(x))}}
\end{equation*}
Since the algebra is unital, any adjointable operator is $C[0,1]$-compact: $\mathscr L(C[0,1]) \simeq \mathscr K(C[0,1])$, hence  must be $C[0,1]$-Fredholm as well. Unfortunately, the square root $\sqrt{\come} \in C[0,1]$ can be approximated by functions in the range $\Im T$, but it doesn't belong to it. 
\end{exemplo}

Therefore, in order to develop the theory of Fredholm operator between Hilbert modules and, in some extent, try to obtain a correspondence with the classical theory, we shall dodge that closure of the Fredholm range. Hence, we will focus on a smaller class of operators: those which admit pseudo-inverse, henceforth, the \textit{regular} ones. Later, we shall extent our results to general Fredholm operators, showing that each and everyone is, in some extent, regularizable.

\section{Regular Fredholm operators}
\label{sec: regular fredholm}
\begin{definicao}[Regular operators]
It is said to be \textit{regular} any operator $T\in \adj(E,F)$ that admits a \textit{pseudo-inverse}, i.e., there exists $S\in \adj(F,E)$ such that $TST=T$ and $STS=S$. When $S$ is such that $TS$ and $ST$ are idempotents, it is called a \textit{Moore-Penrose} inverse. 
\end{definicao}

For a regular Fredholm operator $T$, such a pseudo-inverse $S$ fits the Fredholm criteria of $T$: If $S'$ is such that $\sub\Id E - S'T$ and $\sub\Id F - TS'$ are finite-rank operators,
\begin{equation*}
    \begin{array}{rcl}
        (\sub \Id E - S'T)(\sub \Id E - ST) &=&  (\sub\Id E - S'T) - (\sub \Id E - S'T)ST \\
        &=& \sub \Id E - S'T- ST + \underbrace{S'TST}_{S'T}  = \sub \Id E - ST
    \end{array}
\end{equation*}
Since $\operatorname{FR}(E,F)$ is an ideal, the above manipulation shows that $\sub\Id E - ST$ is indeed a finite-rank operator (and similarly for $\sub\Id F - TS$).

\begin{exemplo}
\label{exemplo: todo operador em esp hilb tem imagem fechada sse tem pseudo-inversa}
To motivate the study of regular Fredholm operators as some way to deal with a weaker version of "the range is closed", we exhibit the following theorem:
\begin{quote}
    \textbf{Theorem}. For a Hilbert space $H$, a bounded operator $T\in \mathscr B(H)$ admits a Moore-Penrose pseudo-inverse $S$ if, and only if, $\Im T$ is closed.
\end{quote}
One way is disrespectfully trivial: If there exists a Moore-Penrose pseudo-inverse $S$, $\Im T = \Im TS$. Since $TS$ is a orthogonal projection by hypothesis, $\Im T$ is closed. Conversely, let $\sub T0 \coloneqq T\sub\restrita{(\ker T)^{\perp}}$. This is a well know isomorphism between $(\ker T)^{\perp}$ and $\Im T$. Let $S$ be induced by the composition below: 
\begin{equation*}
\begin{tikzcd}
H \arrow[r, "T"] \arrow[d, "P"', two heads] & H \arrow[d, "Q", two heads] \arrow[l, "S", dashed, bend left=49, shift left] \\(\ker T)^\perp \arrow[r, "\sub T0"']        & \Im T
\end{tikzcd}
\end{equation*}
That is to say that $S \coloneqq \iota \inv{\sub T0} Q$, when $\iota : (\ker T)^{\perp} \longhookrightarrow H$ is the inclusion. Notice that whenever $y \in \Im T$, one obtains that $T\inv{\sub T0}y = y$, hence $T\inv{\sub T0}Q = Q$. Since $Q$ is the projection into the range of $T$, notice that $QT=T$. Also, we can drop $\iota$ from $T \iota \inv{\sub T0}$. Hence:
\begin{eqspaced*}{}
\begin{cases}
TST = T\inv{\sub T0}QT = T \\
STS = ST\inv{\sub T0}Q = SQ = \iota\inv{\sub T0}Q^2 \overset{Q^2=Q}= S
\end{cases}
\end{eqspaced*}
Hence $S$ is a pseudo-inverse of $T$. \textcolor{red}{Remains us only to show $S$ is such that $TS$ and $ST$ are self-adjoint.}
\end{exemplo}


\begin{proposicao}
\label{prop: T fredholm --> ker T e ker T* rank finito}
Let $T \in \adj(E, F)$ be a $A$-Fredholm operator. If $T$ admits a pseudo-inverse $S$, then: 
\begin{itroman}
\item $\sub \Id E - ST$ and $TS$ are idempotents with ranges $\ker T$ and $\Im T$. 
\item $\ker T$ and $\ker T^*$ are finite rank modules.
\end{itroman}
\end{proposicao}
\begin{proof}
Notice that $(ST)^2 = S(TST) = ST$ and similarly for $TS$, i.e., they are idempotents. It is easy to see that $\sub\Id E-ST$ also has the idempotent badge, $\Im(\sub \Id E - ST) = \ker T$ and $\Im TS = \Im T$.

Is easy to see that $\sub \Id{\ker T} = (\sub \Id E - ST)\sub\restrita{\ker T}$. When supposing that $T$ is $A$-Fredholm, let $x,y \in E^n$ be such that $\sub \Id E - ST = \Omega_{y}^{\,}\Omega_x^*$. Remind that idempotent operators share their range with some projection by the remark \ref{obs: idempotente gerando inversivel}. Since $\sub\Id E - ST$ is an idempotent, there exists a self-adjoint idempotent operator $P$ such that $\Im(\sub\Id E - St) = \Im P = \ker T$. Therefore, with $a= \Omega_{y}^{\,}\Omega_x^*$ and $p = P$, \ref{obs: idempotente gerando inversivel}.\ref{item: p eh uma projecao} guarantee that
\begin{equation*}
    \Omega_{y}^{\,}\Omega_x^* \sub{\restrita}{\ker T} = P\Omega_{y}^{\,}\Omega_x^*P \overset{P^*=P}= \Omega_{Py}^{\,} \Omega_{Px}^*.
\end{equation*}
Since $Py, Px \in (\ker T)^n$, it follows that $\sub\Id{\ker T} = \Omega_{Py}^{\,} \Omega_{Px}^*$ is a finite-rank operator over $\ker T$, i.e., $\ker T$ is a finite-rank module. Very much the same is sufficient to obtain that $\ker T^*$ also is a finite-rank module.
\end{proof}
%https://pages.uoregon.edu/alonsod/Talks/Fredholm%20Operators.pdf

The rank of a finite rank module is well defined as seen before. Hence, the above proposition enable us to define the Index of regular Fredholm operators.

\begin{definicao}
If $T$ is a $A$-Fredholm operator who admits a pseudo-inverse (i.e., regular), set their \textit{index} to be the $K_0(A)$ element given by
\[
\ind T \coloneqq \rank(\ker T) - \rank(\ker T^*).
\]
\end{definicao}

\begin{proposicao}
\label{prop: propriedades de fredholm}
Our elementary propositions of classical Fredholm operators stands nicely. If $T\in \adj(E,F)$ is a regular Fredholm operator, then:
\begin{itroman}
\item $\ind T^* = -\ind T$.
\item \label{prop item: propriedades de fredholm} For any pseudo-inverse $S$, $\rank(\ker T^*) = \rank(\ker S)$ and $\ind S = - \ind T$.
\item \label{prop item: invertivel tem ind = 0} If there are invertible operators $U$ and $V$ between Hilbert modules such that:
\begin{equation*}
\begin{tikzcd}
X \arrow[r, "U"', "\simeq"] \arrow[rrr, "VTU", bend left] & E \arrow[r, "T"'] & F \arrow[r, "V"', "\simeq"] & Y
\end{tikzcd}
\end{equation*}
Therefore $VTU$ is Fredholm and $\ind(VTU) = \ind T$.
\item \label{prop item: ind(T (+) F) = ind T + ind F}For a $T_i\in \adj(E_i,F_i)$ regular $A$-Fredholm operators for $i\in \{1,2\}$, the direct sum $T_1\oplus T_2$ are Fredholm and $\ind(T_1\oplus T_2) = \ind T_1  + \ind T_2$.
\end{itroman}
\end{proposicao}
\begin{proof}$\left.\right.$
\begin{itroman}
\item Clear.
\item Since $S$ and $T^*$ are Fredholm operators, $\ker T^*$ and $\ker S$ are finite rank modules (\ref{prop: T fredholm --> ker T e ker T* rank finito}). In what comes next, keep in mind that $(\Im T)^{\perp} = \ker T^*$. Visiting again the remark \ref{obs: idempotente gerando inversivel}, one can conclude that for any idempotent $Q : F \longto E$, $F = \Im Q \oplus (\Im Q)^{\perp}$. Since $TS$ is an idempotent, we obtain the following diagram of equality's:
\begin{equation*}
\begin{tikzcd}
\Im(\sub\Id F-TS)\oplus \Im TS \arrow[d, equal] & F \arrow[l, equal] \arrow[r, equal, "\ref{obs: idempotente gerando inversivel}"] & (\Im TS)^{\perp} \oplus\Im TS \arrow[d, "(\Im TS)^{\perp} = (\Im T)^{\perp} = \ker T^*", equal] \\
\ker S \oplus \Im TS    &  & \ker T^* \oplus \Im TS                                                            
\end{tikzcd}
\end{equation*}
Therefore, $\ker S$ and $\ker T^*$ are quasi-stably-isomorphic. Therefore, \ref{teo: M N quasi stably iso ==> rank igual} guarantee that $\rank(\ker S) = \rank(\ker T^*)$. Consequentially, $\ind S = -\ind T$.

\item Notice that $\ker VT = \ker T$ since $V$ is an invertible one, hence $\rank(\ker VT) = \rank(\ker T)$. Analysing $U\sub\restrita{\ker TU}$, one obtains that $\ker TU \simeq \ker T$, thus $\rank(\ker TU) = \rank(\ker T)$. The exact same roll goes for the adjoints. Therefore, the indexes coincide.
\item  \textcolor{red}{First, lets see that $\ker $}\qedhere
\end{itroman}
\end{proof}

Since our compact operators aren't necessarily the same as in Hilbert space case, the index invariance under compact perturbations needs to be handed carefully. 

\begin{proposicao}
\label{prop: ind(I - K) = 0}
If $T\in \adj(E)$ is a regular Fredholm operator such that $(\Id - T)\in \mathscr K(E)$, then $\ind T = 0$.
\begin{proof}
Let $S$ be a pseudo-inverse of $T$. Since $\Id - T$ is a compact operator and the compact operators is an ideal, notice that $S$ is a compact perturbation of the identity:
\[
S = \Id + S(\Id - T) - (\Id - ST)
\]
Considering the isomorphism map $U : \ker T\oplus \Im S \longto \ker S \oplus \Im S$ given by
\begin{equation*}
    U \coloneqq \begin{pmatrix} \Id - TS  & \Id - TS \\ S  & S \end{pmatrix} \hspace{1cm} \inv U = \begin{pmatrix} \Id - ST & (\Id - ST)T \\ ST & STT \end{pmatrix}
\end{equation*}
with the fact that $\Id - S = \sub\Id{\Im S} - \sub{U}{\Im S\Im S}$ is compact, the modules $\ker T$ and $\ker S$ are quasi-stably-isomorphic. By \ref{teo: M N quasi stably iso ==> rank igual}, $\rank(\ker T) = \rank(\ker S)$, hence
\begin{equation*}
    \ind T = \rank(\ker T) - \rank(\ker T^*) \overset{\ref{prop: propriedades de fredholm}\ref{prop item: propriedades de fredholm}}= \rank(\ker T) - \rank(\ker S) = 0. \qedhere
\end{equation*}
\end{proof}
\end{proposicao}

\begin{teorema}
\label{teo: diferenca compacta, indices simetricos}
If $T_1, T_2 \in \adj(E, F)$ are regular Fredholm operators such that $T_1-T_2$ is compact, then $\ind T_1=\ind T_2$.
\begin{proof}
The action plan for the proof will be as follows: Build accessory operators $U$ and $R$ in function of the given maps, such that $U$ is invertible and $\ind R = \ind T_2 - \ind T_1$. Hence, $\ind (UR)$ will be a compact perturbation of the identity, so we can use the previous theorem and obtain that $\ind R=\ind(UR)=0$.

Let $\sub S1$ and $\sub S2$ be pseudo inverses for $T_1$ and $T_2$. Define operators $U$ and $R$ in $\adj(E \oplus F)$ by
\begin{equation*}
    U\coloneqq \begin{pmatrix}
\sub \Id E-\sub S1 T_1 & \sub S1 \\
T_1 & \sub\Id F-T_1 \sub S1
\end{pmatrix} \e R\coloneqq \begin{pmatrix}
0 & \sub S1 \\
T_2 & 0
\end{pmatrix}.
\end{equation*}
\begin{itroman}
\item $\boldsymbol{\ind R = \ind T_2 - \ind T_1}$: Using the coordinate switch operator (which has index zero since it is a invertible one), one obtains that:  
\begin{equation*}
\begin{tikzcd}[column sep=1.0em]
E\oplus F \arrow[rr, "R"] \arrow[rd, "{(x,y) \mapsto (y,x)}"'] &           & E \oplus F \\
& F \oplus E \arrow[ru, "\sub S1 \oplus T_2"'] &
\end{tikzcd}
\hspace{2cm} 
\begin{array}{rcl}
    \ind R &\overset{\ref{prop: propriedades de fredholm}\ref{prop item: invertivel tem ind = 0}}=& \ind(\sub S1 \oplus T_2) \\
    &\overset{\ref{prop: propriedades de fredholm}\ref{prop item: ind(T (+) F) = ind T + ind F}}=& \ind \sub S1 + \ind T_2 \\
    &\overset{\ref{prop: propriedades de fredholm}\ref{prop item: propriedades de fredholm}}=& - \ind T_1+ \ind T_2.
\end{array}
\end{equation*}

\item \textbf{$\boldsymbol U$ is invertible}: We'll show even more: it is a order 2 nilpotent element. Since $\sub \Id E-\sub S1 T_1$ and $\sub \Id F-T_1 \sub S1$ are idempotents, 
\begin{eqnarray*}
    U^2&=&\begin{pmatrix}
\sub \Id E-\sub S1 T_1 & \sub S1 \\
T_1 & \sub\Id F-T_1 \sub S1
\end{pmatrix}^2 \\
&=& \begin{pmatrix}
(\sub \Id E-\sub S1 T_1)^2+ \sub S1T_1 & (\sub \Id E - \sub S1T_1)\sub S1+\sub S1(\sub \Id F-T_1\sub S1) \\
T_1(\sub \Id E-\sub S1T_1)+(\sub \Id F-T_1\sub S1)T_1 & T_1\sub S1+ (\sub\Id F-T_1 \sub S1)^2
\end{pmatrix}\\
&=& \begin{pmatrix}
\sub \Id E & 0 \\
0 & \sub\Id F
\end{pmatrix} = \sub \Id{E\oplus F}.
\end{eqnarray*}
Therefore $U$ is invertible.

\item \textbf{$\boldsymbol{UR}$ is a compact perturbation of identity}: First, we obtain $UR$:
\begin{equation*}
    U R=\begin{pmatrix}
\sub \Id E-\sub S1 T_1 & \sub S1 \\
T_1 & \sub\Id F-T_1 \sub S1
\end{pmatrix}\begin{pmatrix}
0 & \sub S1 \\
T_2 & 0
\end{pmatrix}=\begin{pmatrix}
\sub S1 T_2 & 0 \\
(\sub \Id F-T_1 \sub S1)T_2 & T_1 \sub S1
\end{pmatrix}
\end{equation*}
Bravely evaluating the difference, we must determine if is compact the following operator:
\begin{equation*}
    \sub \Id{E\oplus F} - UR = \begin{pmatrix}
\sub\Id{E}-\sub S1 T_2 & 0 \\
(T_1 \sub S1-\sub\Id F)T_2 & \sub{\Id}F-T_1 \sub S1
\end{pmatrix}
\end{equation*}
Notice that all operators in the second row are compact since $T_1$ is Fredholm. From the hypothesis, $T_1 -T_2$ is compact, hence:
\begin{equation*}
    \sub \Id E - \sub S1T_2 = \sub \Id E - \sub S1T_1 + \sub S1T_1- \sub S1T_2  = (\sub \Id E - \sub S1T_1) + \sub S1(T_1-T_2) \in \mathscr K(E).
\end{equation*}
Since each entry of $\sub \Id{E\oplus F} - UR$ is a compact operator, the claim is proved.
\end{itroman}
Using \ref{prop: propriedades de fredholm}\ref{prop item: invertivel tem ind = 0} again, we have that $\ind(U R)=\ind R$. Since $UR$ is a compact perturbation of the identity, it follows that $\ind(U R)=0$ by \ref{prop: ind(I - K) = 0}.
\end{proof}
\end{teorema}

\section{Regularization of Fredholm operators}

Time to extend our concepts to general Fredholm operators. A change in algebras will be necessary, so we write our next lemma with new a $C^*$-algebra notation.

\begin{lema}
\label{lema: construcao regularizacao}
Let $B$ be a unital $C^*$-algebra and $T \in \sub\adj B(E,F)$ a $B$-Fredholm but not necessarily regular. There exists a natural $n$ and some $x\in E^n$ such that  \begin{equation*}
    \begin{pmatrix} T & 0 \\ \Omega_x^* & 0 \end{pmatrix}: E\oplus B^n \longto F\oplus B^n
\end{equation*}
is a regular $B$-Fredholm operator.
\begin{proof}
Let $S$ be a pseudo-inverse of $T$ such that both $\sub \Id E - ST$ and $\sub \Id F - TS$ are finite rank operators, and $\sub \Id E - ST = \Omega_{y}^{\,}\Omega_x^*$ for some $y \in F^n$, $x \in E^n$. We will construct operators $\widetilde{T}$ and $\widetilde{S}$ that are regular Fredholm. Define the following operators:
%<*RegularizacaoDeTeS>
\begin{equation*}
    \widetilde T \coloneqq \begin{pmatrix} T & 0 \\ \Omega_x^* & 0 \end{pmatrix} \e
    \widetilde S \coloneqq \begin{pmatrix} S & \Omega_y^{\,} \\ 0 & 0\end{pmatrix}.
\end{equation*}
%</RegularizacaoDeTeS>
\begin{itroman}
\item \textbf{\mathbf{\widetilde T} and \mathbf{\widetilde{S}} are pseudo-inverses of each other, hence regular}: In what follows, we need the expressions: 
\begin{alter}
\item \label{lema: construcao regularizacao item 1}$T\Omega_y^{\,}\Omega_x^* = T(\sub \Id E - ST) = T - TST = 0$.
\item \label{lema: construcao regularizacao item 2} $\Omega_x^*(ST + \Omega_y^{\,}\Omega_x^*) = \Omega_x^* (ST+\sub \Id E - ST) = \Omega_x^*$.
\end{alter}
Notice that
\begin{equation*}
    \begin{array}{rcl}
        \widetilde T\widetilde S\widetilde T &=&  \begin{pmatrix} T & 0 \\ \Omega_x^* & 0 \end{pmatrix} \begin{pmatrix} S & \Omega_y^{\,} \\ 0 & 0\end{pmatrix} \begin{pmatrix} T & 0 \\ \Omega_x^* & 0 \end{pmatrix} \\
        &=& \vphantom{\displaystyle\int\limits_{\int}^\int} \begin{pmatrix} TS & T\Omega_y^{\,} \\ \Omega_x^*S & \Omega_x^*\Omega_y^{\,} \end{pmatrix} \begin{pmatrix} T & 0 \\ \Omega_x^* & 0 \end{pmatrix} \\
        &=& \begin{pmatrix} 
        TST + T\Omega_y^{\,}\Omega_x^* & 0\\ 
        \Omega_x^*(ST + \Omega_y^{\,}\Omega_x^*) & 0 
        \end{pmatrix}  \overset{\ref{lema: construcao regularizacao item 1}+\ref{lema: construcao regularizacao item 2}}= \begin{pmatrix} T & 0 \\ \Omega_x^* & 0 \end{pmatrix} = \widetilde T
    \end{array}
\end{equation*}

Similarly, one can obtain that $\widetilde{S}\widetilde T\widetilde S = \widetilde S$, hence
$\widetilde T$ and $\widetilde S$ are regular due to the fact that they are each others pseudo-inverses.

\item \textbf{\mathbf{\widetilde T} and \mathbf{\widetilde{S}} are Fredholm operators}: Notice that:
\begin{equation}
\label{eq: I_E(+)B^n - tilde(S)tilde(T)}
    \begin{array}{c}
        \sub \Id{E\oplus B^n} - \widetilde S\widetilde T = \begin{pmatrix} \sub \Id E & 0 \\ 0 & \sub\Id{B^n} \end{pmatrix} - \begin{pmatrix} ST + \Omega_y^{\,}\Omega_x^* & 0 \\ 0 & 0\end{pmatrix} = \begin{pmatrix}
    0 & 0 \\ 0 & \sub\Id{B^n} \end{pmatrix}\\
    \vspace{0.25cm} \\
    \sub \Id{F\oplus B^n} - \widetilde T\widetilde S =  \begin{pmatrix} \sub \Id F & 0 \\ 0 & \sub\Id{B^n} \end{pmatrix} - \begin{pmatrix} TS  & T\Omega_y^{\,} \\ \Omega_x^*S & \Omega_x^*\Omega_y
    \end{pmatrix} 
    =
    \begin{pmatrix}
    \sub \Id F - TS & - T\Omega_y^{\,} \\ - \Omega_x^*S & \sub\Id{B^n}- \Omega_x^*\Omega_y^{\,}
    \end{pmatrix}
    \end{array}
\end{equation}
Lets check that every entry in those matrices are compact:
\begin{alter}
\item \textbf{\mathbf{\sub\Id{E}} is finite rank}: Since $B$ is unital, $\sub \Id{B^n} = \Omega_{(\sub1E,\ldots,\sub1E)}^{\,}\Omega_{(\sub1E,\ldots,\sub1E)}^*$.
\item \textbf{\mathbf{\sub\Id F - TS} is finite rank}: By assumption.
\item \textbf{\mathbf{-\Omega_x^*S, -T\Omega_y} and \mathbf{\sub \Id{B^n}-\Omega_x^*\Omega_y^{\,}} are compact}: This is due to the fact that $\Omega_y$ and $\Omega_x^{*}$ are compact (proposition \ref{prop: Omega_x eh compacto}) and the set of compact operators is an ideal. 
\end{alter}
Therefore, $\sub \Id{E\oplus B^n} - \widetilde S\widetilde T$ and $\sub \Id{F\oplus B^n} - \widetilde T\widetilde S$ are compact operators. Finally, proposition \ref{prop: I-ST compacto ===>  T fredholm} guarantee that $\widetilde T$ and $\widetilde S$ are regular Fredholm operators. \qedhere
\end{itroman}
\end{proof}
\end{lema}

\begin{definicao}[Regularization of a Fredholm operator]
\label{def: regularizacao de Fredholm}
Given a $A$-Fredholm $T\in \sub\adj{A}(E,F)$, the \textit{regularization of $T$} is the $\widetilde{A}$-Fredholm $\widetilde T \in \sub{\adj}{\widetilde{A}}(E\oplus \widetilde{A}^n,F\oplus \widetilde{A}^n)$ constructed using lemma \ref{lema: construcao regularizacao} for $B = \widetilde{A} \coloneqq A \oplus \C$ being the unitization of $A$. 
\end{definicao}

\begin{proposicao}
\label{prop: ruy 3.9}
For any $A$-Fredholm operator $T$, despite the fact that the regularization $\widetilde T$ is a $\widetilde{A}$-Fredholm operator, the index of $\widetilde T$ lies in $K_0(A)$.
\begin{proof}
Let $B \coloneqq \widetilde{A}$ and $\ep: B \longtwoheadrightarrow \C$ the complex projection $a\oplus z \longmapsto z$. Since $K_0(A)$ is the kernel of $\sub\ep{0} \coloneqq K_{00}(\ep)$, we seek to obtain that $\sub\ep{0}(\ind \widetilde T) = 0$. We borrow notations and results from the proof of \ref{lema: construcao regularizacao}, i.e., $\sub \Id E-ST= \Omega_y^{\,}\Omega_x^*$ and 
\begin{equation*}
    \widetilde T \coloneqq \begin{pmatrix} T & 0 \\ \Omega_x^* & 0 \end{pmatrix} \e
    \widetilde S \coloneqq \begin{pmatrix} S & \Omega_y^{\,} \\ 0 & 0\end{pmatrix}.
\end{equation*}
are regular $B$-Fredholm operators and pseudo-inverses of each otter. To compute the index of $\widetilde T$, first we obtain that $\rank(\ker \widetilde T) = n\cdot \sub 1{K_0(A)}$; in order to obtain $\rank (\ker \widetilde T^*)= \rank(\ker \widetilde S)$, we will introduce two new operators $P$ and $Q$, such that the rank of $\ker \widetilde{S}$ will coincide with the embedding of trace of $\ep(Q)$, which will be equal to $n$. 
\begin{itroman}
    \item \textbf{$\boldsymbol{\rank(\ker \widetilde T) = n\cdot \sub{1}{K_0(B)}}$}: In the proof of \ref{lema: construcao regularizacao}, we saw that $\sub\Id{E\oplus B^n}-\widetilde S\widetilde T=0 \oplus \sub\Id{B^n}$ at (\ref{eq: I_E(+)B^n - tilde(S)tilde(T)}). Since $\ker \widetilde T = \Im(\sub\Id{E\oplus B^n}-\widetilde S\widetilde T)$, it follows that \begin{equation*}
        \rank(\ker \widetilde T) = [0 \oplus \sub\Id{B^n}]_0 = n\cdot[\sub1{B}]_0 = n \cdot \sub{1}{K_0(B)}.
    \end{equation*}
\end{itroman}    
As in the proof of \ref{lema: construcao regularizacao}, $\sub \Id E - ST = \Omega_y^{\,}\Omega_x^*$ for $y\in F^n$, $x\in E^n$. Let:
\begin{equation}
    \label{eq: P = Id - wide T wide S}
       P \coloneqq \sub \Id{F\oplus B^n} - \widetilde T\widetilde S \overset{(\ref{eq: I_E(+)B^n - tilde(S)tilde(T)})}= \begin{pmatrix}
    \sub \Id F - TS & - T\Omega_y^{\,} \\ - \Omega_x^*S & \sub\Id{B^n}- \Omega_x^*\Omega_y^{\,}
    \end{pmatrix}
\end{equation}
    
\begin{enumerate}[label=\ensuremath{(\roman*)}]
    \setcounter{enumi}{1}
    \item \textbf{$\boldsymbol{\ker \widetilde S = \Im P}$}. Lets check that the two sets coincide: In one direction, $\widetilde S-\widetilde S\widetilde T\widetilde S = 0$ since $\widetilde S$ and $\widetilde T$ are pseudo-inverses of each other. Hence $\ker \widetilde S \supset \Im P$. Conversely, the elements of the range of $P$ can be written as:
        \begin{eqspaced*}{\left(\begin{array}{c}
             \zeta\in F\\ a\in B^n
        \end{array}\right)}
            \begin{array}{rcl}
                P(\zeta\oplus a) &=& \begin{pmatrix}
    \sub \Id F - TS & - T\Omega_y^{\,} \\ - \Omega_x^*S & \sub\Id{B^n}- \Omega_x^*\Omega_y^{\,}
    \end{pmatrix}\begin{pmatrix}
            \zeta \\ a 
            \end{pmatrix} \\
            &=& \begin{pmatrix}
            \zeta - T(S\zeta +\Omega_y^{\,}a) \\ a - \Omega_x^*(\Omega_y^{\,}a + S\zeta)
            \end{pmatrix}
            \end{array}
        \end{eqspaced*}
        If $(\zeta\oplus a) \in \ker \widetilde S$, then $P(\zeta \oplus a) = \zeta \oplus a$, hence $\zeta\oplus a$ is in the range of $P$, i.e., $\ker \widetilde S \subset \Im P$.
\end{enumerate}

Hence, we shall compute $\rank(\Im P)$. Since $\widetilde S$ is regular Fredholm, $\Im P = \ker \widetilde S $ is a finite-rank module (\ref{prop: T fredholm --> ker T e ker T* rank finito}), i.e., $\sub \Id{\Im P}$ can be written as $\Omega_\phi^{\,}\Omega_\psi^*$ for some $m\in \N$ and a pair of tuples $\phi, \psi \in (F \oplus B^n)^m$, hence
    \[
    \sub\Id{\Im P} (P(\come)) = \Omega_{\phi}\Omega_{\psi}^*(P(\come)) \To P = \Omega_\phi \Omega_{P^*\psi}^* 
    \]
\begin{enumerate}[label=\ensuremath{(\roman*)}]
    \setcounter{enumi}{2}
    \item \textbf{\mathbf{Q \coloneqq \Omega_{P^*\psi}^* \Omega_{P\phi}^{\,} \in \adj(B^n)} is an idempotent operator}: Indeed:
    \begin{equation*}
        Q^2 =(\Omega_{\psi}^*P\Omega_\phi^{\,})^2 =  \Omega_{\psi}^* P\underbrace{(\Omega_{\phi} \Omega_{P^*\psi}^*)}_P\Omega_{\phi} = \Omega_{P^*\psi}^*\Omega_{P\phi}^{\,} = Q
 \end{equation*}
 Therefore, $Q$ is an idempotent operator in $B^n$ and it corresponds to left multiplication by the matrix $(\inner{P\phi_i}{P\psi_j})_{i,j}$.

 \item \textbf{\mathbf{\Im Q \simeq \Im P} as \mathbf{B}-modules}:  
 \begin{equation*}
     \function{{R}{\Im P}{\Im Q}{P\xi}{\Omega_{P^*\psi}^*\Omega_{\phi}^{\,}P\xi = Q\xi}}
 \end{equation*}
    
    \item \textbf{$\boldsymbol{\rank(\Im Q) =\texttt{\textit{Tr}}\ep(Q)}\cdot \sub1{K_0(A)}$}
    \item \textbf{ $\boldsymbol{\texttt{\textit{Tr}}\ep(Q) = n}$}: Let $(e_r)_{r\leq n}$ be the canonical basis of $B^n$. We shall write the coordinates of $P\phi$ and $P\psi$ as: 
\begin{eqspaced*}{\begin{pmatrix}
\zeta_i, \xi_i \in F\\
a_i, b_i \in B^n\\
1\leq i \leq m
\end{pmatrix}}
        P\phi_i = (\zeta_i \oplus a_i) \e P\psi_i = (\xi_i \oplus b_i)
\end{eqspaced*}
    Hence $\ep(\inner{P\psi_i}{P\phi_i}) = \ep(\inner{b_i}{a_i})$. Hence, the trace is given by
    \begin{equation*}
        \begin{array}{rcl}
            \texttt{\textit{Tr}}\ep(Q) &=& \sum\limits_{i=1}^m \ep\left(\left\langle P\psi_i, P\phi_i\right\rangle\right) \\ &=& \sum\limits_{i=1}^m \ep\left(\left\langle b_i, a_i\right\rangle\right) \\
        &=& \ep\left(\sum\limits_{i=1}^m \sum\limits_{r=1}^n\left\langle b_i, e_r\right\rangle\left\langle e_r, a_i\right\rangle\right) \\
        &=& \ep\left(\sum\limits_{i=1}^m \sum\limits_{r=1}^n\left\langle e_r, a_i\left\langle b_i, e_r\right\rangle\right\rangle\right)\\
        &=&\ep\left(\sum\limits_{r=1}^n\left\langle\left(0, e_r\right), P\left(0, e_r\right)\right\rangle\right) 
        \end{array}
    \end{equation*}
    Using the definition of $P$ in \ref{eq: P = Id - wide T wide S}, the term $\sum_{r=1}^n\left\langle\left(0, e_r\right), P\left(0, e_r\right)\right\rangle$ can be expressed as
$$
\sum_{r=1}^n\left\langle e_r,(\sub\Id{B^n}-\Omega_x^* \Omega_y) e_r\right\rangle=n-\sum_{r=1}^n\left\langle x_r, y_r\right\rangle
$$
hence $\texttt{\textit{Tr}}\ep(Q) = n$.
\end{enumerate}
With all these steps, we conclude that 
\begin{equation*}
    \rank(\ker \widetilde S) = \rank(\Im P) = \rank(\Im Q) = \texttt{\textit{Tr}}\ep(Q) = n
\end{equation*}
and finally that $\sub\ep{0}(\ind \widetilde T) = 0$.
\end{proof}
\end{proposicao}

The statement of \ref{prop: ruy 3.9} is meant to refer to the specific construction of $\widetilde{T}$ obtained in \ref{def: regularizacao de Fredholm}. But note that any regular Fredholm operator in $\sub\adj{{A}^u}\left(E \oplus {\widetilde{A}}^n, F \oplus {\widetilde{A}}^n\right)$, which has $T$ in the upper left corner, will differ from the $\widetilde{T}$ above, by an ${\widetilde{A}}$-compact operator. Therefore its index will coincide with that of $\widetilde{T}$ by \ref{lema: construcao regularizacao}, and so will be in $K_0(A)$ as well.

\begin{definicao}
If $T$ is a Fredholm operator in $\adj(E, F)$, then the Fredholm index of $T$, denoted $\ind T$, is defined to be the index of the regular Fredholm operator $\widetilde{T}$ constructed in proposition \ref{prop: ruy 3.9}.
\end{definicao}

\begin{proposicao}

\textcolor{red}{Let $T$ be a $A$-Fredholm operator.}
\begin{itroman}
\item $\ind T^* =- \ind T$.
\item If $T_1-T_2$ is compact, $\ind T_1 = \ind T_2$.
\end{itroman}
\begin{proof}
\begin{itroman}
\item $\ind T^* = \ind (\widetilde{T^*}) = - \ind \widetilde T =  - \ind T$.
\item Proposition \ref{prop: propriedades de fredholm}\ref{prop item: invertivel tem ind = 0} can be transposed as the same.
\item If $T_1,T_2$ are such that $T_1-T_2$ are compact, then $\widetilde{T_1} - \widetilde{T_2}$ also is, since
\begin{equation*}
    \widetilde{T_1}-\widetilde{T_2} = \begin{pmatrix}
    T_1-T_2 & 0 \\ \Omega_{\sub x1}^*-\Omega_{\sub x2}^* & 0
    \end{pmatrix}.
\end{equation*}
Hence \ref{teo: diferenca compacta, indices simetricos} applies.
\end{itroman}
\end{proof}
\end{proposicao}

As consequence of the Atikinson's theorem in the classical theory, one can obtain that the original index is locally constant. Since it is now our definition, we can extract the same proof.
\begin{proposicao}
Let $\mathscr Q \coloneqq \adj(E,F)/\mathscr K(E,F)$ and $\pi: \mathscr L(E,F) \longto \mathscr Q$ be the quotient projection. The set of Fredholm operators $\mathscr F(E,F) \coloneqq \pi^{-1}\GL(\mathscr Q) \subset \adj(E,F)$ is an open subset and $\ind : \mathscr F(E,F)\longto K_0(A)$ is locally constant.
\begin{proof}
The fact that $\mathscr F(E,F)$ is an open set follows from the continuity of $\pi$ on the the invertible elements of a unital $C^*$-algebra \ref{prop: GL(A) eh aberto}.

Let $T\in \mathscr F(E,F)$ and $S$ be a pseudo-inverse of $T$. Let $R \in \sub{\mathscr B}{\|S\|^{-1}}(T) \subset \mathscr F(E,F)$ in the open ball around $T$ of radius $\|S\|^{-1}$. Hence
\[
\|TS - RS\| \leqslant \|T-R\|\|S\| \leqslant 1.
\]
Hence $\Id - (TS - RS)$ is a invertible Fredholm operator, which means that it has index 0. Notice that $(\Id - (TS - RS))T = RST$. Therefore:
\begin{equation*}
    \ind T = \ind((\Id - (TS - RS))T) =\ind(RST) = \ind R+\ind S + \ind T
\end{equation*}
hence $\ind R = - \ind S$. Since $R$ was arbitrary in the open ball, $\ind {\restrita}_{\sub{\mathscr B}{\|S\|^{-1}}(T)}(R) = -\ind S$, i.e., the index is locally constant.
\end{proof}
\end{proposicao}

\begin{teorema}[The Snake Lemma]
Assume that the following diagram of Hilbert $A$-modules and adjointable operators is commutative:
\begin{equation*}
\begin{tikzcd}
0 \arrow[r] & E_1 \arrow[r, "i"] \arrow[d, "T_1"'] & E_2 \arrow[r, "p"] \arrow[d, "T_2"] & E_3 \arrow[r] \arrow[d, "T_3"] & 0 \\
0 \arrow[r] & F_1 \arrow[r, "j"']                        & F_2 \arrow[r,"q"']                       & F_3 \arrow[r]                  & 0
\end{tikzcd}
\end{equation*}
with exact horizontal sequences and $A$-Fredholm operators for vertical maps. Therefore:
\begin{equation*}
    \ind(T_1) - \ind(T_2) + \ind(T_3) = 0.
\end{equation*}
\begin{proof}
We are willing to reproduce Bleeckers proof of the classical snake lemma for Fredholm operators. So we will try to follow the same steps.
\begin{itroman}
\item \textbf{The sequence (\ref{eq: pre-snake}) is exact}:
\begin{equation}
\label{eq: pre-snake}
    \begin{tikzcd}
  0 \rar & \ker T_1 \rar & \ker T_2 \rar 
             \ar[draw=none]{d}[name=X, anchor=center]{}
    & \ker T_3 \ar[rounded corners,
            to path={ -- ([xshift=2ex]\tikztostart.east)
                      |- (X.center) \tikztonodes
                      -| ([xshift=-2ex]\tikztotarget.west)
                      -- (\tikztotarget)}]{dll}[at end]{} &  \\
  & \ker T_1^* \rar & \ker T_2^* \rar & \ker T_3^* \rar & 0
  \end{tikzcd}
\end{equation}
\end{itroman}
\end{proof}
\end{teorema}

\begin{proposicao}
Choose $A$-Fredholm operators such that
\begin{equation*}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAFEQBfU9TXfIRQBGclVqMWbAGLdeIDNjwEiAJjHV6zVohABxbuJhQA5vCKgAZgCcIAWyRkQOCElETtbACoB9YSGoGOgAjGAYABX5lIRBrLBMACxw5K1sHRCcXJHUPKV1fVV9-QJCwyKVBNgYYS2TqULAoJABmYh5U+zdqLMQcrTyQAoCQINCIqMrdOMTkrgouIA
\begin{tikzcd}
E \arrow[r, "T_1"'] \arrow[rr, "T_2T_1", bend left] & F \arrow[r, "T_2"'] & G
\end{tikzcd}
\end{equation*}
Therefore, $T_2T_1$ is a Fredholm operator and $\ind(T_2T_1) = \ind T_1 + \ind T2$.
\begin{proof}
%One should consider
%\begin{equation*}
%\begin{tikzcd}
%0 \arrow[r] & E \arrow[rr, "{\Id \oplus T_1}"] \arrow[d, "T_1"] &  & E\oplus F \arrow[rr, "{T_1 \oplus (-\Id)}"] \arrow[d, "T_2T_1 \oplus \Id"] &  & F \arrow[r] \arrow[d, "T_2"] & 0 \\
%0 \arrow[r] & F \arrow[rr, "{\Id \oplus T_2}"']&  & G\oplus F \arrow[rr, "{\Id \oplus (-T_2)}"']&  & G \arrow[r]& 0
%\end{tikzcd}
%\end{equation*}
%and apply the Snake Lemma.


Consider $H_t : F\oplus E \longto G \oplus E$ given by 
\begin{equation*}
    H_t \coloneqq 
    \begin{pmatrix}
    T_2 & 0\\0 & \Id
    \end{pmatrix}
    \begin{pmatrix}
    \cos(t) & -\sin(t)\\
    \sin(t) & \cos(t)
    \end{pmatrix}
    \begin{pmatrix}
    \Id & 0\\0 & T_1
    \end{pmatrix}
    =
    \begin{pmatrix}
    \cos(t) T_2 & -\sin(t)T_2T_1 \\
    \sin(t)  & \cos(t) T_1
    \end{pmatrix}
\end{equation*}
for $t\in [0,\pi]$. Since $\ind(H_0) = \ind T_2 + \ind T_1$ and $\ind(H_\pi) = \ind(T_2T_1)$
\end{proof}
\end{proposicao}

\begin{observacao}
In light of example \ref{exemplo: familia continua de operadores}, let $T:X \longto \mathscr F(\ell^2(\N))$ be a continuous family of classical Fredholm operators. We saw that $\widehat T : \xi \longmapsto T_{(\come)}{\xi(\come)}$ for $\xi \in \sub{\mathscr H}{C(X)}$ was a $C(X)$-Fredholm operator. 

However, since $\ell^2(\N)$ is a separable Hilbert space, one can consider an orthogonal basis $\left(e_n\right)_n \subset \ell^2(\N)$ and let $H_n$ be the closed subspace spanned by $\sub e0, \sub e1, \ldots, e_{n-1}$, and let $p_n$ be the associated projection. Let $\operatorname{Vect}(X)$ denote the abelian semi-group of isomorphism classes of all (complex) vector bundles over $X$. 

Using topological $K$-theory, one can define a analytical index given by
\begin{equation*}
    \ind_{\operatorname{an}} T \coloneqq [\ker p_n\circ T]_{0} - [X \times H^\perp_n]_0
\end{equation*}
for a sufficiently large $n$, where $[\come]_{0}$ is the isomorphism class in $\operatorname{Vect}(X) \longhookrightarrow K(X)$.
\end{observacao}


\begin{proposicao}
For any $\alpha \in K_0(A)$, there exists a Fredholm operator $T$ with $\ind(T)=\alpha$.
\begin{proof}
Write $\alpha = [p]_0 - [q]_0$ with $\sub\ep0([p]_0 - [q]_0)=0$, for self-adjoint idempotent matrices. Hence $\ep(p)$ and $\ep(q)$ are similar matrix. After performing a conjugation of, say $q$, by a complex unitary matrix, we may assume that $\varepsilon(p)$ and $\varepsilon(q)$ are in fact equal, hence $(p-q) \in \mathbb M_n(A)$. With bricks in hands, choose 
\begin{equation*}
    \function{{T}{pA^n}{qA^n}{x}{qx}}
\end{equation*}
which is 
\begin{itroman}
\item \textbf{\ensuremath{\boldsymbol{T}} is a Fredholm operator}: Let $S: q A^n \longto p A^n$ be the similar operator given by $Sy=py$. Let $\left(\sub{u}{\lambda}\right)_\lambda$ be an approximate identity for $A$. Therefore, consider the tuples $\xi$ and $\eta^\lambda$, where their coordinates are given by:
\begin{eqspaced*}{(1 \leq i \leq n)}
    \xi_i=p(p-q) p_i^{\vphantom{*}} \e \eta_i^\lambda=p_i^{\vphantom{*}} \sub{u}{\lambda}
\end{eqspaced*}
With the tuples defined, remember that $\sub{\inner{a}{b}}A = a^*b$, hence:
\begin{eqspaced*}{(x \in pA^n)}
    \begin{array}{rcl}
        \Omega_{\xi}^{\,} \Omega_{\eta^\lambda}^*x &=& \sum\limits_{i=1}^n \xi_i\sub{\inner{\eta_i^\lambda}{x}}{A}\\ 
        &=& \sum\limits_{i=1}^n \xi_i\big(({p_i^{\vphantom{*}}\sub u\lambda})^*{x}\big)\\ 
        &=& \sum\limits_{i=1}^n p(p-q) p_i^{\vphantom{*}} \sub{u}{\lambda} p_i^* x.
    \end{array}
\end{eqspaced*}
The following converges uniformly:
\begin{eqspaced*}{(\|x\|\leq 1)}
    \begin{array}{rcl}
    \displaystyle
        \lim_\lambda \Omega_\xi^{\,}\Omega_{\eta^\lambda}^* x &=& \sum\limits_{i=1}^n p(p-q) p_i^{\,} p_i^* x \\
        &=& p(p-q) p x = x-p q x=(\Id -S T) x 
    \end{array}
\end{eqspaced*}
The above shows that $\sub\Id {pA^n}-ST $ is compact, and if we force ourselves into the symmetry, $\sub\Id {qA^n} - TS$ also. By applying \ref{prop: I-ST compacto ===>  T fredholm}, the claim is proved.
\item \textbf{\ensuremath{\boldsymbol{\ind T = \alpha}}}: In order to compute the index of $T$, consider the operators 
\begin{equation*}
    T'=\left(\begin{array}{cc}
q p & q(I-p) \\
(I-q) p & (I-q)(I-p)
\end{array}\right) \e {S}'=\left(\begin{array}{cc}
p q & p(I-q) \\
(I-p) q & (I-p)(I-q)
\end{array}\right)
\end{equation*}
Direct computation shows that
\begin{equation*}
    {S}' {T}'=\left(\begin{array}{cc}
\sub \Id{pA^n} & 0 \\
0 & \sub\Id{\widetilde{A}^n}-p
\end{array}\right) \e {T}' {S}'=\left(\begin{array}{cc}
\sub\Id{qA^n} & 0 \\
0 & \sub\Id{\widetilde{A}^n}-q
\end{array}\right),
\end{equation*}
from which it follows that ${S}'$ is a pseudo-inverse for ${T}'$ and hence that ${T}'$ is a regular ${A}^u$-Fredholm operator. 

By construction, $\Id - S'T'$ and $\Id - T'S'$ are compact self-adjoint idempotents, hence their ranges are finite rank modules (\ref{prop: compacto idempotente eh rank finito}). Moreover, we already know that
\begin{equation*}
    \Im(\Id - S'T') = \ker T' \e \Im(\Id - T'S') = \ker S'
\end{equation*}
which turns possible the index calculation: 
\begin{equation*}
    \begin{array}{rcl}
        \ind T &=& \ind {T}'\\
        &=& \rank(\ker T') - \rank(\ker S') \\
        &=& \rank \Im(I-{S}' {T}')-\rank \Im (I-{T}' {S}')\\
        &=& [p]_0-[q]_0 = \alpha
    \end{array}
\end{equation*}
as desired. \hfill \qedhere
\end{itroman}
\end{proof}
\end{proposicao}

\section{``Fredholm Picture of \texorpdfstring{$K_0(A)$}{K0(A)}''}

We already saw that every element of $K_0(A)$ is the index of some Fredholm operator.

Choose a large cardinal number $\omega$ greater than the cardinality of each and every $A^n$ for every integer $n$. Denote by $F_0(A)$ the family of all $A$-Fredholm operators whose domain and codomain are Hilbert modules with cardinality no larger than $\omega$. We will introduce a equivalence relation in $F_0(A)$, by characterizing whenever two operators $T_1$ and $T_2$ contains the same index.

\begin{proposicao}
Let $T\in \sub\adj A(E,F)$ be Fredholm operator with $\ind T = 0$. Therefore, there exists a integer $n$ such that $T\oplus \sub\Id{A^n}$ is a compact perturbation of an invertible operator.

\begin{proof}
Let $\widetilde{T}$ be the regularization of $T$ and, as always, there is an integer $n$ and a operator $S$ such that $\Id-\widetilde{S}\widetilde{T} = 0 \oplus \sub\Id{\widetilde{A}^n}$. 

\begin{itroman}
\item \textbf{\mathbf{n} can be chosen to be such that \mathbf{\Im (I-\widetilde{T}\widetilde{S})\cong \widetilde{A}^n}}: The hypothesis of null index is equivalent to $\rank \Im(\Id-\widetilde{S}\widetilde{T}) = \rank \Im(\Id-\widetilde{T}\widetilde{S})$, hence
\begin{equation*}
    \rank \Im(\Id-\widetilde{T}\widetilde{S}) = \rank \Im (0\oplus \sub{\Id}{\widetilde{A}^n}) = n \cdot \sub{1}{K_0(A)}
\end{equation*}
i.e., $\Im(\Id-\widetilde{T}\widetilde{S})$ is stably isomorphic to $\widetilde{A}^n$ as $\widetilde{A}$-modules, meaning that for some integer $r$, $\Im(\Id-\widetilde{T}\widetilde{S}) \oplus \widetilde{A}^r \simeq \widetilde{A}^{n+r}$. Remember that $\Omega_x^* =  \left(\inner{x_i}{\come}\right)_{i\leq n}$, hence, for $0 \in E^m$, $\Omega_{(x,0)}^*(\come) = (\Omega_x^*(\come), 0)$ and the regularization $\widetilde{T}$ can be updated to
\begin{equation*}
    \widetilde{T} = \begin{pmatrix}
    (T,0) & 0 \\ \Omega_{(x,0)}^* & 0 
    \end{pmatrix}
\end{equation*}
Therefore, by increasing $n$, without loss of generality,  $\Im(I-\widetilde{T}\widetilde{S}) \simeq \widetilde{A}^n$. 

\item \textbf{There} \textbf{is} \textbf{a} \textbf{orthonormal} \textbf{set} \mathbf{\left((\zeta_i, a_i)\right)_{i\leq n} \subset \Im(I -\widetilde{T}\widetilde{S})} \textbf{such} \textbf{that} \mathbf{\ep((\sub a{1}, \ldots, a_n)) = I}: Let $\left(p_i\right)_{i\leq n} \subset \Im (I-\widetilde{T}\widetilde{S})$ with $p_i = (\zeta_i, a^{\,}_i) \in F\oplus \widetilde{A}^n$. The elements $p_i$ can be choosen so that they generate the module and $\inner{p_i}{p_j} =  \delta_{i,j}$, i.e., they are orthonormal. Since each $a^{\,}_i \in \widetilde{A}^n$, one can write $a^{\,}_i = (a^{\,}_{i,r})_{r \leq n}$. Hence, orthonormality can be written as:
\begin{equation*}
    \begin{array}{rcl}
        \delta_{i,j} &=& \sub{\inner{p_i}{p_j}}{F\oplus \widetilde{A}^n} \\
        &=& \vphantom{\sum\limits^n} \sub{\inner{\zeta_i}{\zeta_j}}F + \sub{\inner{a^{\,}_i}{a^{\,}_j}}{\widetilde{A}^n} \\
        &=& \sub{\inner{\zeta_i}{\zeta_j}}F + \sum\limits_{r=1}^n\sub{\inner{a^{\,}_{i,r}}{a^{\,}_{j,r}}}{\widetilde{A}} \\
        &=& \sub{\inner{\zeta_i}{\zeta_j}}F + \sum\limits_{r=1}^n a^*_{i,r}a_{j,r}^{\,}
    \end{array}
\end{equation*}
We claim that $u \coloneqq \ep((a^{\,}_{i,j})_{i,j})$ is a unitary matrix, i.e., $uu^* = u^*u = \Id$. Whence, setting $q_{i} \coloneqq \sum_{j=1}^n u_{ij}^* p_j$, we obtain $q_i = (\xi_i, b_i)$ in which $\ep(b_{i,j}) = \delta_{i,j}$. Therefore, one can suppose that $(p_i)_{i\leq n}$ attends the required condition, otherwise, replace $p$ by $q$.

\item \textbf{\mathbf{U \coloneqq \begin{inlinematrix}T & \Omega_{\zeta} \\ \Omega_x^* & \Omega_{a} \end{inlinematrix}} is invertible}: As in the proof of \ref{lema: construcao regularizacao}, we suppose that $\Id - ST = \Omega^{\,}_y\Omega_x^*$. Notice that $\Omega_{\zeta}\oplus \Omega_{a} : \widetilde{A}^n \longto \Im (I-\widetilde{T}\widetilde{S})$ is an isomorphism. Therefore
\begin{equation*}
    \function{{U}{E\oplus \widetilde{A}^n}{F\oplus \widetilde{A}^n}{(\xi, b)}{\begin{inlinematrix}T & \Omega_{\zeta} \\ \Omega_x^* & \Omega_{a} \end{inlinematrix}\begin{inlinematrix} \xi \\ b \end{inlinematrix}}}
\end{equation*}
\textcolor{red}{Porque isso daqui √© invers√≠vel?}
\end{itroman}
\end{proof}
\end{proposicao}

\begin{proposicao}
For Fredholm operators $T_i\in \adj(E_i,F_i)$ ($i\in \{1,2\}$), there exists a integer $n$ such that $T_1 \oplus T_2^* \oplus \sub\Id{A^n}$ is a compact perturbation of a invertible operator.
\end{proposicao}

\begin{teorema}
The index map $\ind : F(A) \longto K_0(A)$ is a group isomorphism.
\end{teorema}